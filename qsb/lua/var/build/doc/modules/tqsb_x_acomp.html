<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<button onclick="topFunction()" id="back2top" title="Nach oben scrollen">&#11014</button>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name">Siedelwood | QSB<big><b></b></big></div>
	<div id="product_description">Dokumentation der S6-QSB der Siedelwood Community</div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>ldoc</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Anwenderfunktionen">Anwenderfunktionen</a></li>
<li><a href="#QSB_Kern">QSB-Kern</a></li>
<li><a href="#QSB_1_GuiControl">QSB_1_GuiControl</a></li>
<li><a href="#QSB_1_Entity">QSB_1_Entity</a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/qsb.html">(0) Basismodul</a></li>
  <li><a href="../modules/smodules.qsb_1_entity.html">(1) Entitätensteuerung</a></li>
  <li><a href="../modules/smodules.qsb_1_guicontrol.html">(1) Anzeigesteuerung</a></li>
  <li><a href="../modules/smodules.qsb_1_guieffects.html">(1) Anzeigeeffekte</a></li>
  <li><a href="../modules/smodules.qsb_1_movement.html">(1) Bewegung</a></li>
  <li><a href="../modules/smodules.qsb_1_requester.html">(1) Dialogfenster</a></li>
  <li><a href="../modules/smodules.qsb_1_sound.html">(1) Sound</a></li>
  <li><a href="../modules/smodules.qsb_1_trade.html">(1) Handelserweiterung</a></li>
  <li><a href="../modules/smodules.qsb_2_buildingcost.html">(2) Baukostensystem</a></li>
  <li><a href="../modules/smodules.qsb_2_buildingui.html">(2) Gebäudeschalter</a></li>
  <li><a href="../modules/smodules.qsb_2_buildrestriction.html">(2) Baubeschränkung</a></li>
  <li><a href="../modules/smodules.qsb_2_camera.html">(2) Kamerafunktionen</a></li>
  <li><a href="../modules/smodules.qsb_2_newbehavior.html">(2) Neue Behavior</a></li>
  <li><a href="../modules/smodules.qsb_2_npc.html">(2) Ansprechbare Siedler</a></li>
  <li><a href="../modules/smodules.qsb_2_objects.html">(2) Interaktive Objekte</a></li>
  <li><a href="../modules/smodules.qsb_2_promotion.html">(2) Aufstiegsbedingungen</a></li>
  <li><a href="../modules/smodules.qsb_2_quest.html">(2) Aufträge</a></li>
  <li><a href="../modules/smodules.qsb_2_selection.html">(2) Selektion</a></li>
  <li><a href="../modules/smodules.qsb_3_briefingsystem.html">(3) Briefing System</a></li>
  <li><a href="../modules/smodules.qsb_3_cutscenesystem.html">(3) Cutscene System</a></li>
  <li><a href="../modules/smodules.qsb_3_dialogsystem.html">(3) Dialog System</a></li>
  <li><a href="../modules/smodules.qsb_3_lifestock.html">(3) Viehzucht</a></li>
  <li><a href="../modules/smodules.qsb_3_militarylimit.html">(3) Soldatenlimit</a></li>
  <li><a href="../modules/smodules.qsb_3_traderoutes.html">(3) Handelsrouten</a></li>
  <li><a href="../modules/smodules.qsb_4_iomines.html">(4) Interaktive Minen</a></li>
  <li><a href="../modules/smodules.qsb_4_iosites.html">(4) Interaktive Baustellen</a></li>
  <li><a href="../modules/smodules.qsb_4_iotreasure.html">(4) Interaktive Schätze</a></li>
  <li><a href="../modules/smodules.qsb_4_questjournal.html">(4) Auftragsnotizen</a></li>
  <li><strong>(X) Kompatibilität</strong></li>

</ul>
<h2>Addons</h2>
<ul class=nowrap>

  <li><a href="../modules/xaddons.qsb_x_addon_1_singlebuttons.html">Addon (1) SingleButtons</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>(X) Kompatibilität</code></h1>
<p>Die Kompatibilitätsfunktionen dienen dazu, dass die alte Schnittstelle der früheren QSB möglichst abgedeckt wird.</p>
<p>
 <b>Hinweis</b>: Diese Funktionen sind derzeit nur in der qsb_comp.lua bzw qsb_comp.luac enthalten.
</p>
    <h3>Info:</h3>
    <ul>
        <li><strong>Author</strong>: Jelumar</li>
    </ul>


<h2><a href="#Anwenderfunktionen">Anwenderfunktionen</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#API.RemoveHotKey">API.RemoveHotKey (_ID)</a></td>
	<td class="summary">Entfernt eine Beschreibung eines selbst gewählten Hotkeys.</td>
	</tr>
</table>
<h2><a href="#QSB_Kern">QSB-Kern</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#API.AddSaveGameAction">API.AddSaveGameAction (_Function)</a></td>
	<td class="summary">Registriert eine Funktion, die nach dem laden ausgeführt wird.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#API.Confront">API.Confront (_entity, _entityToLookAt)</a></td>
	<td class="summary">Lässt zwei Entities sich gegenseitig anschauen.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#API.EnsureScriptName">API.EnsureScriptName (_EntityID)</a></td>
	<td class="summary">Gibt dem Entity einen eindeutigen Skriptnamen und gibt ihn zurück.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#API.InstanceTable">API.InstanceTable (_Source, _Dest)</a></td>
	<td class="summary">Kopiert eine komplette Table und gibt die Kopie zurück.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#API.LocateEntity">API.LocateEntity (_Entity)</a></td>
	<td class="summary">Lokalisiert ein Entity auf der Map.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#API.RealTimeWait">API.RealTimeWait (_Waittime, _Action, ...)</a></td>
	<td class="summary">Wartet die angebene Zeit in realen Sekunden und führt anschließend das
 Callback aus.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#API.Round">API.Round (_Value, _DecimalDigits)</a></td>
	<td class="summary">Rundet eine Dezimalzahl kaufmännisch ab.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#API.StartEventJob">API.StartEventJob (_EventType, _Function, ...)</a></td>
	<td class="summary">Erzeugt einen neuen Event-Job.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#API.TraverseTable">API.TraverseTable (_Data, _Table)</a></td>
	<td class="summary">Sucht in einer eindimensionalen Table nach einem Wert.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#API.ValidatePosition">API.ValidatePosition (_Pos)</a></td>
	<td class="summary">Prüft, ob eine Positionstabelle eine gültige Position enthält.</td>
	</tr>
</table>
<h2><a href="#QSB_1_GuiControl">QSB_1_GuiControl</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#API.AddHotKey">API.AddHotKey (_Key, _Description)</a></td>
	<td class="summary">Fügt eine Beschreibung zu einem selbst gewählten Hotkey hinzu.</td>
	</tr>
</table>
<h2><a href="#QSB_1_Entity">QSB_1_Entity</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#API.GetEntitiesOfCategoryInTerritory">API.GetEntitiesOfCategoryInTerritory (_PlayerID, _Category, _Territory)</a></td>
	<td class="summary">Ermittelt alle Entities in der Kategorie auf dem Territorium und gibt
 sie als Liste zurück.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Anwenderfunktionen"></a>Anwenderfunktionen</h2>

    <dl class="function">
    <dt>
    <a name = "API.RemoveHotKey"></a>
    <strong>API.RemoveHotKey (_ID)</strong>
    </dt>
    <dd>
    Entfernt eine Beschreibung eines selbst gewählten Hotkeys.
<p> <b>QSB:</b> API.RemoveShortcutEntry(_ID)



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_ID</span>
            <span class="types"><span class="type">number</span></span>
         Index in Table
        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header "><a name="QSB_Kern"></a>QSB-Kern</h2>

    <dl class="function">
    <dt>
    <a name = "API.AddSaveGameAction"></a>
    <strong>API.AddSaveGameAction (_Function)</strong>
    </dt>
    <dd>
    Registriert eine Funktion, die nach dem laden ausgeführt wird.
<p> <b>Alias</b>: AddOnSaveGameLoadedAction



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Function</span>
            <span class="types"><span class="type">function</span></span>
         Funktion, die ausgeführt werden soll
        </li>
    </ul>




    <h3>Beispiel:</h3>
    <ul>
        <pre class="example">SaveGame = <span class="keyword">function</span>()
    API.Note(<span class="string">"foo"</span>)
<span class="keyword">end</span>
API.AddSaveGameAction(SaveGame)</pre>
    </ul>

</dd>
    <dt>
    <a name = "API.Confront"></a>
    <strong>API.Confront (_entity, _entityToLookAt)</strong>
    </dt>
    <dd>
    Lässt zwei Entities sich gegenseitig anschauen.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_entity</span>
                 Entity (Skriptname oder ID)
        </li>
        <li><span class="parameter">_entityToLookAt</span>
         Ziel (Skriptname oder ID)
        </li>
    </ul>




    <h3>Beispiel:</h3>
    <ul>
        <pre class="example">API.Confront(<span class="string">"Hakim"</span>, <span class="string">"Alandra"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "API.EnsureScriptName"></a>
    <strong>API.EnsureScriptName (_EntityID)</strong>
    </dt>
    <dd>
    Gibt dem Entity einen eindeutigen Skriptnamen und gibt ihn zurück.
 Hat das Entity einen Namen, bleibt dieser unverändert und wird
 zurückgegeben.
<p> <b>QSB:</b> API.CreateEntityName(_EntityID)
 <b>Alias:</b> GiveEntityName



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_EntityID</span>
            <span class="types"><span class="type">number</span></span>
         Entity ID
        </li>
    </ul>

    <h3>Rückgabe:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        Skriptname
    </ol>



    <h3>Beispiel:</h3>
    <ul>
        <pre class="example">Skriptname = API.EnsureScriptName(_EntityID)</pre>
    </ul>

</dd>
    <dt>
    <a name = "API.InstanceTable"></a>
    <strong>API.InstanceTable (_Source, _Dest)</strong>
    </dt>
    <dd>
    Kopiert eine komplette Table und gibt die Kopie zurück.  Tables können
 nicht durch Zuweisungen kopiert werden. Verwende diese Funktion. Wenn ein
 Ziel angegeben wird, ist die zurückgegebene Table eine Vereinigung der 2
 angegebenen Tables.
 Die Funktion arbeitet rekursiv.

 <b>QSB:</b> table.copy(_Source, _Dest)
 <b>Alias:</b> CopyTableRecursive



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Source</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         Quelltabelle
        </li>
        <li><span class="parameter">_Dest</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
           (optional) Zieltabelle
        </li>
    </ul>

    <h3>Rückgabe:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
        Kopie der Tabelle
    </ol>



    <h3>Beispiel:</h3>
    <ul>
        <pre class="example">Table = {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, {a = <span class="keyword">true</span>}}
Copy = API.InstanceTable(Table)</pre>
    </ul>

</dd>
    <dt>
    <a name = "API.LocateEntity"></a>
    <strong>API.LocateEntity (_Entity)</strong>
    </dt>
    <dd>
    Lokalisiert ein Entity auf der Map.  Es können sowohl Skriptnamen als auch
 IDs verwendet werden. Wenn das Entity nicht gefunden wird, wird eine
 Tabelle mit XYZ = 0 zurückgegeben.
<p> <b>QSB:</b> API.GetPosition(_Entity)
 <p><b>Alias:</b> GetPosition</p>



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Entity</span>
         Entity (Skriptname oder ID)
        </li>
    </ul>

    <h3>Rückgabe:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
        Positionstabelle {X= x, Y= y, Z= z}
    </ol>



    <h3>Beispiel:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> Position = API.LocateEntity(<span class="string">"Hans"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "API.RealTimeWait"></a>
    <strong>API.RealTimeWait (_Waittime, _Action, ...)</strong>
    </dt>
    <dd>
    Wartet die angebene Zeit in realen Sekunden und führt anschließend das
 Callback aus.  Die Ausführung erfolgt asynchron. Das bedeutet, dass das
 Skript weiterläuft.
<p> Hinweis: Einmal gestartet, kann wait nicht beendet werden.
<p> <b>QSB:</b> API.StartRealTimeDelay(_Waittime, _Function, ...)



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Waittime</span>
            <span class="types"><span class="type">number</span></span>
         Wartezeit in realen Sekunden
        </li>
        <li><span class="parameter">_Action</span>
            <span class="types"><span class="type">function</span></span>
         Callback-Funktion
        </li>
        <li><span class="parameter">...</span>
         Liste der Argumente
        </li>
    </ul>

    <h3>Rückgabe:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        Vergangene reale Zeit
    </ol>




</dd>
    <dt>
    <a name = "API.Round"></a>
    <strong>API.Round (_Value, _DecimalDigits)</strong>
    </dt>
    <dd>
    Rundet eine Dezimalzahl kaufmännisch ab.
<p> <b>Hinweis</b>: Es wird manuell gerundet um den Rundungsfehler in der
 History Edition zu umgehen.
<p> <p><b>Alias:</b> Round</p>



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Value</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                 Zu rundender Wert
        </li>
        <li><span class="parameter">_DecimalDigits</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         Maximale Dezimalstellen
        </li>
    </ul>

    <h3>Rückgabe:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        Abgerundete Zahl
    </ol>




</dd>
    <dt>
    <a name = "API.StartEventJob"></a>
    <strong>API.StartEventJob (_EventType, _Function, ...)</strong>
    </dt>
    <dd>
    Erzeugt einen neuen Event-Job.
<p> <b>Hinweis</b>: Nur wenn ein Event Job mit dieser Funktion gestartet wird,
 können ResumeJob und YieldJob auf den Job angewendet werden.
<p> <b>Hinweis</b>: Events.LOGIC_EVENT_ENTITY_CREATED funktioniert nicht!
<p> <b>Hinweis</b>: Wird ein Table als Argument an den Job übergeben, wird eine
 Kopie angeleigt um Speicherprobleme zu verhindern. Es handelt sich also um
 eine neue Table und keine Referenz!
<p> <b>QSB:</b> API.StartJobByEventType (_EventType, _Function, ...)



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_EventType</span>
            <span class="types"><span class="type">number</span></span>
         Event-Typ
        </li>
        <li><span class="parameter">_Function</span>
          Funktion (Funktionsreferenz oder String)
        </li>
        <li><span class="parameter">...</span>
                    Optionale Argumente des Job
        </li>
    </ul>

    <h3>Rückgabe:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        ID des Jobs
    </ol>




</dd>
    <dt>
    <a name = "API.TraverseTable"></a>
    <strong>API.TraverseTable (_Data, _Table)</strong>
    </dt>
    <dd>
    Sucht in einer eindimensionalen Table nach einem Wert.  Das erste Auftreten des Suchwerts wird als Erfolg gewertet. Es können praktisch alle Lua-Werte gesucht werden.

 <b>QSB:</b> table.contains(_Data, _Table)
 <b>Alias:</b> Inside



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Data</span>
         Gesuchter Eintrag (multible Datentypen)
        </li>
        <li><span class="parameter">_Table</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         Tabelle, die durchquert wird
        </li>
    </ul>

    <h3>Rückgabe:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        Wert gefunden
    </ol>



    <h3>Beispiel:</h3>
    <ul>
        <pre class="example">Table = {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, {a = <span class="keyword">true</span>}}
<span class="keyword">local</span> Found = API.TraverseTable(<span class="number">3</span>, Table)</pre>
    </ul>

</dd>
    <dt>
    <a name = "API.ValidatePosition"></a>
    <strong>API.ValidatePosition (_Pos)</strong>
    </dt>
    <dd>
    Prüft, ob eine Positionstabelle eine gültige Position enthält.
<p> Eine Position ist Ungültig, wenn sie sich nicht auf der Welt befindet.
 Das ist der Fall bei negativen Werten oder Werten, welche die Größe
 der Welt übersteigen.
<p> <b>QSB:</b> API.IsValidPosition(_Pos)
 <p><b>Alias:</b> IsValidPosition</p>



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Pos</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         Positionstable {X= x, Y= y}
        </li>
    </ul>

    <h3>Rückgabe:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        Position ist valide
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="QSB_1_GuiControl"></a>QSB_1_GuiControl</h2>

    <dl class="function">
    <dt>
    <a name = "API.AddHotKey"></a>
    <strong>API.AddHotKey (_Key, _Description)</strong>
    </dt>
    <dd>
    Fügt eine Beschreibung zu einem selbst gewählten Hotkey hinzu.
<p> Ist der Hotkey bereits vorhanden, wird -1 zurückgegeben.
<p> <b>QSB:</b> API.AddShortcutEntry(_Key, _Description)



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_Key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                 Tastenkombination
        </li>
        <li><span class="parameter">_Description</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         Beschreibung des Hotkey
        </li>
    </ul>

    <h3>Rückgabe:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        Index oder Fehlercode
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="QSB_1_Entity"></a>QSB_1_Entity</h2>

    <dl class="function">
    <dt>
    <a name = "API.GetEntitiesOfCategoryInTerritory"></a>
    <strong>API.GetEntitiesOfCategoryInTerritory (_PlayerID, _Category, _Territory)</strong>
    </dt>
    <dd>
    Ermittelt alle Entities in der Kategorie auf dem Territorium und gibt
 sie als Liste zurück.
<p> <b>QSB:</b> API.SearchEntitiesOfCategoryInTerritory(_Territory, _Category, _PlayerID)
 <p><b>Alias:</b> GetEntitiesOfCategoryInTerritory</p>



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_PlayerID</span>
            <span class="types"><span class="type">number</span></span>
            PlayerID [0-8] oder -1 für alle
        </li>
        <li><span class="parameter">_Category</span>
            <span class="types"><span class="type">number</span></span>
          Kategorie, der die Entities angehören
        </li>
        <li><span class="parameter">_Territory</span>
            <span class="types"><span class="type">number</span></span>
         Zielterritorium
        </li>
    </ul>




    <h3>Beispiel:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> Found = API.GetEntitiesOfCategoryInTerritory(<span class="number">1</span>, EntityCategories.Hero, <span class="number">5</span>)</pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2023-04-20 12:25:59 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->

<script>
    window.onscroll = function() {scrollFunction()};

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("back2top").style.display = "block";
        } else {
            document.getElementById("back2top").style.display = "none";
        }
    }

    function topFunction() {
        document.body.scrollTop = 0; // For Safari
        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    }
</script>

</body>
</html>
